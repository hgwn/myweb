module.exports=function(){"use strict";function e(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function t(){var e=[],t=[];return function(){return 0===arguments.length?t.join("")+l.apply(String,e):(e.length+arguments.length>1024&&(t.push(l.apply(String,e)),e.length=0),void Array.prototype.push.apply(e,arguments))}}var r=require("buffer"),f=r.Buffer,i=(r.SlowBuffer,require("long")),n=null;try{n=require("memcpy")}catch(s){}var o=function(e,t,r){if("undefined"==typeof e&&(e=o.DEFAULT_CAPACITY),"undefined"==typeof t&&(t=o.DEFAULT_ENDIAN),"undefined"==typeof r&&(r=o.DEFAULT_NOASSERT),!r){if(e=0|e,0>e)throw RangeError("Illegal capacity");t=!!t,r=!!r}this.buffer=0===e?u:new f(e),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian="undefined"!=typeof t?!!t:!1,this.noAssert=!!r};o.VERSION="3.5.4",o.LITTLE_ENDIAN=!0,o.BIG_ENDIAN=!1,o.DEFAULT_CAPACITY=16,o.DEFAULT_ENDIAN=o.BIG_ENDIAN,o.DEFAULT_NOASSERT=!1,o.Long=i;var h=o.prototype,u=new f(0),l=String.fromCharCode;o.allocate=function(e,t,r){return new o(e,t,r)},o.concat=function(e,t,r,f){("boolean"==typeof t||"string"!=typeof t)&&(f=r,r=t,t=void 0);for(var i,n=0,s=0,h=e.length;h>s;++s)o.isByteBuffer(e[s])||(e[s]=o.wrap(e[s],t)),i=e[s].limit-e[s].offset,i>0&&(n+=i);if(0===n)return new o(0,r,f);var u,l=new o(n,r,f);for(s=0;h>s;)u=e[s++],i=u.limit-u.offset,0>=i||(u.buffer.copy(l.buffer,l.offset,u.offset,u.limit),l.offset+=i);return l.limit=l.offset,l.offset=0,l},o.isByteBuffer=function(e){return(e&&e instanceof o)===!0},o.type=function(){return f},o.wrap=function(e,t,r,i){if("string"!=typeof t&&(i=r,r=t,t=void 0),"string"==typeof e)switch("undefined"==typeof t&&(t="utf8"),t){case"base64":return o.fromBase64(e,r);case"hex":return o.fromHex(e,r);case"binary":return o.fromBinary(e,r);case"utf8":return o.fromUTF8(e,r);case"debug":return o.fromDebug(e,r);default:throw Error("Unsupported encoding: "+t)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var s;if(o.isByteBuffer(e))return s=h.clone.call(e),s.markedOffset=-1,s;var u,l=0,a=0;if(e instanceof Uint8Array){if(u=new f(e.length),n)n(u,0,e.buffer,e.byteOffset,e.byteOffset+e.length);else for(l=0,a=e.length;a>l;++l)u[l]=e[l];e=u}else if(e instanceof ArrayBuffer){if(u=new f(e.byteLength),n)n(u,0,e,0,e.byteLength);else for(e=new Uint8Array(e),l=0,a=e.length;a>l;++l)u[l]=e[l];e=u}else if(!(e instanceof f)){if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");e=new f(e)}return s=new o(0,r,i),e.length>0&&(s.buffer=e,s.limit=e.length),s},h.writeInt8=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=1;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=1,this.buffer[t]=e,r&&(this.offset+=1),this},h.writeByte=h.writeInt8,h.readInt8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r=this.buffer[e];return 128===(128&r)&&(r=-(255-r+1)),t&&(this.offset+=1),r},h.readByte=h.readInt8,h.writeUint8=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=1;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=1,this.buffer[t]=e,r&&(this.offset+=1),this},h.readUint8=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r=this.buffer[e];return t&&(this.offset+=1),r},h.writeInt16=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=2;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=2,this.littleEndian?(this.buffer[t+1]=(65280&e)>>>8,this.buffer[t]=255&e):(this.buffer[t]=(65280&e)>>>8,this.buffer[t+1]=255&e),r&&(this.offset+=2),this},h.writeShort=h.writeInt16,h.readInt16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+2>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.length)}var r=0;return this.littleEndian?(r=this.buffer[e],r|=this.buffer[e+1]<<8):(r=this.buffer[e]<<8,r|=this.buffer[e+1]),32768===(32768&r)&&(r=-(65535-r+1)),t&&(this.offset+=2),r},h.readShort=h.readInt16,h.writeUint16=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=2;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=2,this.littleEndian?(this.buffer[t+1]=(65280&e)>>>8,this.buffer[t]=255&e):(this.buffer[t]=(65280&e)>>>8,this.buffer[t+1]=255&e),r&&(this.offset+=2),this},h.readUint16=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+2>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.length)}var r=0;return this.littleEndian?(r=this.buffer[e],r|=this.buffer[e+1]<<8):(r=this.buffer[e]<<8,r|=this.buffer[e+1]),t&&(this.offset+=2),r},h.writeInt32=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=4;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=4,this.littleEndian?(this.buffer[t+3]=e>>>24&255,this.buffer[t+2]=e>>>16&255,this.buffer[t+1]=e>>>8&255,this.buffer[t]=255&e):(this.buffer[t]=e>>>24&255,this.buffer[t+1]=e>>>16&255,this.buffer[t+2]=e>>>8&255,this.buffer[t+3]=255&e),r&&(this.offset+=4),this},h.writeInt=h.writeInt32,h.readInt32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.length)}var r=0;return this.littleEndian?(r=this.buffer[e+2]<<16,r|=this.buffer[e+1]<<8,r|=this.buffer[e],r+=this.buffer[e+3]<<24>>>0):(r=this.buffer[e+1]<<16,r|=this.buffer[e+2]<<8,r|=this.buffer[e+3],r+=this.buffer[e]<<24>>>0),r|=0,t&&(this.offset+=4),r},h.readInt=h.readInt32,h.writeUint32=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=4;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=4,this.littleEndian?(this.buffer[t+3]=e>>>24&255,this.buffer[t+2]=e>>>16&255,this.buffer[t+1]=e>>>8&255,this.buffer[t]=255&e):(this.buffer[t]=e>>>24&255,this.buffer[t+1]=e>>>16&255,this.buffer[t+2]=e>>>8&255,this.buffer[t+3]=255&e),r&&(this.offset+=4),this},h.readUint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.length)}var r=0;return this.littleEndian?(r=this.buffer[e+2]<<16,r|=this.buffer[e+1]<<8,r|=this.buffer[e],r+=this.buffer[e+3]<<24>>>0):(r=this.buffer[e+1]<<16,r|=this.buffer[e+2]<<8,r|=this.buffer[e+3],r+=this.buffer[e]<<24>>>0),t&&(this.offset+=4),r},i&&(h.writeInt64=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=i.fromNumber(e);else if(!(e&&e instanceof i))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}"number"==typeof e&&(e=i.fromNumber(e)),t+=8;var f=this.buffer.length;t>f&&this.resize((f*=2)>t?f:t),t-=8;var n=e.low,s=e.high;return this.littleEndian?(this.buffer[t+3]=n>>>24&255,this.buffer[t+2]=n>>>16&255,this.buffer[t+1]=n>>>8&255,this.buffer[t]=255&n,t+=4,this.buffer[t+3]=s>>>24&255,this.buffer[t+2]=s>>>16&255,this.buffer[t+1]=s>>>8&255,this.buffer[t]=255&s):(this.buffer[t]=s>>>24&255,this.buffer[t+1]=s>>>16&255,this.buffer[t+2]=s>>>8&255,this.buffer[t+3]=255&s,t+=4,this.buffer[t]=n>>>24&255,this.buffer[t+1]=n>>>16&255,this.buffer[t+2]=n>>>8&255,this.buffer[t+3]=255&n),r&&(this.offset+=8),this},h.writeLong=h.writeInt64,h.readInt64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.length)}var r=0,f=0;this.littleEndian?(r=this.buffer[e+2]<<16,r|=this.buffer[e+1]<<8,r|=this.buffer[e],r+=this.buffer[e+3]<<24>>>0,e+=4,f=this.buffer[e+2]<<16,f|=this.buffer[e+1]<<8,f|=this.buffer[e],f+=this.buffer[e+3]<<24>>>0):(f=this.buffer[e+1]<<16,f|=this.buffer[e+2]<<8,f|=this.buffer[e+3],f+=this.buffer[e]<<24>>>0,e+=4,r=this.buffer[e+1]<<16,r|=this.buffer[e+2]<<8,r|=this.buffer[e+3],r+=this.buffer[e]<<24>>>0);var n=new i(r,f,!1);return t&&(this.offset+=8),n},h.readLong=h.readInt64,h.writeUint64=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=i.fromNumber(e);else if(!(e&&e instanceof i))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}"number"==typeof e&&(e=i.fromNumber(e)),t+=8;var f=this.buffer.length;t>f&&this.resize((f*=2)>t?f:t),t-=8;var n=e.low,s=e.high;return this.littleEndian?(this.buffer[t+3]=n>>>24&255,this.buffer[t+2]=n>>>16&255,this.buffer[t+1]=n>>>8&255,this.buffer[t]=255&n,t+=4,this.buffer[t+3]=s>>>24&255,this.buffer[t+2]=s>>>16&255,this.buffer[t+1]=s>>>8&255,this.buffer[t]=255&s):(this.buffer[t]=s>>>24&255,this.buffer[t+1]=s>>>16&255,this.buffer[t+2]=s>>>8&255,this.buffer[t+3]=255&s,t+=4,this.buffer[t]=n>>>24&255,this.buffer[t+1]=n>>>16&255,this.buffer[t+2]=n>>>8&255,this.buffer[t+3]=255&n),r&&(this.offset+=8),this},h.readUint64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.length)}var r=0,f=0;this.littleEndian?(r=this.buffer[e+2]<<16,r|=this.buffer[e+1]<<8,r|=this.buffer[e],r+=this.buffer[e+3]<<24>>>0,e+=4,f=this.buffer[e+2]<<16,f|=this.buffer[e+1]<<8,f|=this.buffer[e],f+=this.buffer[e+3]<<24>>>0):(f=this.buffer[e+1]<<16,f|=this.buffer[e+2]<<8,f|=this.buffer[e+3],f+=this.buffer[e]<<24>>>0,e+=4,r=this.buffer[e+1]<<16,r|=this.buffer[e+2]<<8,r|=this.buffer[e+3],r+=this.buffer[e]<<24>>>0);var n=new i(r,f,!0);return t&&(this.offset+=8),n}),h.writeFloat32=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=4;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=4,this.littleEndian?this.buffer.writeFloatLE(e,t,!0):this.buffer.writeFloatBE(e,t,!0),r&&(this.offset+=4),this},h.writeFloat=h.writeFloat32,h.readFloat32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.length)}var r=this.littleEndian?this.buffer.readFloatLE(e,!0):this.buffer.readFloatBE(e,!0);return t&&(this.offset+=4),r},h.readFloat=h.readFloat32,h.writeFloat64=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}t+=8;var f=this.buffer.length;return t>f&&this.resize((f*=2)>t?f:t),t-=8,this.littleEndian?this.buffer.writeDoubleLE(e,t,!0):this.buffer.writeDoubleBE(e,t,!0),r&&(this.offset+=8),this},h.writeDouble=h.writeFloat64,h.readFloat64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.length)}var r=this.littleEndian?this.buffer.readDoubleLE(e,!0):this.buffer.readDoubleBE(e,!0);return t&&(this.offset+=8),r},h.readDouble=h.readFloat64,o.MAX_VARINT32_BYTES=5,o.calculateVarint32=function(e){return e>>>=0,128>e?1:16384>e?2:1<<21>e?3:1<<28>e?4:5},o.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},o.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},h.writeVarint32=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}var f,i=o.calculateVarint32(e);t+=i;var n=this.buffer.length;return t>n&&this.resize((n*=2)>t?n:t),t-=i,this.buffer[t]=f=128|e,e>>>=0,e>=128?(f=e>>7|128,this.buffer[t+1]=f,e>=16384?(f=e>>14|128,this.buffer[t+2]=f,e>=1<<21?(f=e>>21|128,this.buffer[t+3]=f,e>=1<<28?(this.buffer[t+4]=e>>28&15,i=5):(this.buffer[t+3]=127&f,i=4)):(this.buffer[t+2]=127&f,i=3)):(this.buffer[t+1]=127&f,i=2)):(this.buffer[t]=127&f,i=1),r?(this.offset+=i,this):i},h.writeVarint32ZigZag=function(e,t){return this.writeVarint32(o.zigZagEncode32(e),t)},h.readVarint32=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r,f,i=0,n=0;do{if(f=e+i,!this.noAssert&&f>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}r=this.buffer[f],5>i&&(n|=(127&r)<<7*i>>>0),++i}while(128===(128&r));return n=0|n,t?(this.offset+=i,n):{value:n,length:i}},h.readVarint32ZigZag=function(e){var t=this.readVarint32(e);return"object"==typeof t?t.value=o.zigZagDecode32(t.value):t=o.zigZagDecode32(t),t},i&&(o.MAX_VARINT64_BYTES=10,o.calculateVarint64=function(e){"number"==typeof e&&(e=i.fromNumber(e));var t=e.toInt()>>>0,r=e.shiftRightUnsigned(28).toInt()>>>0,f=e.shiftRightUnsigned(56).toInt()>>>0;return 0==f?0==r?16384>t?128>t?1:2:1<<21>t?3:4:16384>r?128>r?5:6:1<<21>r?7:8:128>f?9:10},o.zigZagEncode64=function(e){return"number"==typeof e?e=i.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},o.zigZagDecode64=function(e){return"number"==typeof e?e=i.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(i.ONE).toSigned().negate()).toSigned()},h.writeVarint64=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"==typeof e)e=i.fromNumber(e);else if(!(e&&e instanceof i))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}"number"==typeof e?e=i.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned());var f=o.calculateVarint64(e),n=e.toInt()>>>0,s=e.shiftRightUnsigned(28).toInt()>>>0,h=e.shiftRightUnsigned(56).toInt()>>>0;t+=f;var u=this.buffer.length;switch(t>u&&this.resize((u*=2)>t?u:t),t-=f,f){case 10:this.buffer[t+9]=h>>>7&1;case 9:this.buffer[t+8]=9!==f?128|h:127&h;case 8:this.buffer[t+7]=8!==f?s>>>21|128:s>>>21&127;case 7:this.buffer[t+6]=7!==f?s>>>14|128:s>>>14&127;case 6:this.buffer[t+5]=6!==f?s>>>7|128:s>>>7&127;case 5:this.buffer[t+4]=5!==f?128|s:127&s;case 4:this.buffer[t+3]=4!==f?n>>>21|128:n>>>21&127;case 3:this.buffer[t+2]=3!==f?n>>>14|128:n>>>14&127;case 2:this.buffer[t+1]=2!==f?n>>>7|128:n>>>7&127;case 1:this.buffer[t]=1!==f?128|n:127&n}return r?(this.offset+=f,this):f},h.writeVarint64ZigZag=function(e,t){return this.writeVarint64(o.zigZagEncode64(e),t)},h.readVarint64=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r=e,f=0,n=0,s=0,o=0;if(o=this.buffer[e++],f=127&o,128&o&&(o=this.buffer[e++],f|=(127&o)<<7,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],f|=(127&o)<<14,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],f|=(127&o)<<21,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],n=127&o,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],n|=(127&o)<<7,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],n|=(127&o)<<14,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],n|=(127&o)<<21,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],s=127&o,(128&o||this.noAssert&&"undefined"==typeof o)&&(o=this.buffer[e++],s|=(127&o)<<7,128&o||this.noAssert&&"undefined"==typeof o))))))))))throw Error("Buffer overrun");var h=i.fromBits(f|n<<28,n>>>4|s<<24,!1);return t?(this.offset=e,h):{value:h,length:e-r}},h.readVarint64ZigZag=function(e){var t=this.readVarint64(e);return t&&t.value instanceof i?t.value=o.zigZagDecode64(t.value):t=o.zigZagDecode64(t),t}),h.writeCString=function(e,t){var r="undefined"==typeof t;r&&(t=this.offset);var i,n=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(i=0;n>i;++i)if(0===e.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}var s=t;n=f.byteLength(e,"utf8"),t+=n+1;var o=this.buffer.length;return t>o&&this.resize((o*=2)>t?o:t),t-=n+1,t+=this.buffer.write(e,t,n,"utf8"),this.buffer[t++]=0,r?(this.offset=t-s,this):n},h.readCString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r,f=e;do{if(e>=this.buffer.length)throw RangeError("Index out of range: "+e+" <= "+this.buffer.length);r=this.buffer[e++]}while(0!==r);var i=this.buffer.toString("utf8",f,e-1);return t?(this.offset=e,i):{string:i,length:e-f}},h.writeIString=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}var i,n=t;i=f.byteLength(e,"utf8"),t+=4+i;var s=this.buffer.length;return t>s&&this.resize((s*=2)>t?s:t),t-=4+i,this.littleEndian?(this.buffer[t+3]=i>>>24&255,this.buffer[t+2]=i>>>16&255,this.buffer[t+1]=i>>>8&255,this.buffer[t]=255&i):(this.buffer[t]=i>>>24&255,this.buffer[t+1]=i>>>16&255,this.buffer[t+2]=i>>>8&255,this.buffer[t+3]=255&i),t+=4,t+=this.buffer.write(e,t,i,"utf8"),r?(this.offset=t,this):t-n},h.readIString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+4>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.length)}var r,f=0,i=e;if(this.littleEndian?(f=this.buffer[e+2]<<16,f|=this.buffer[e+1]<<8,f|=this.buffer[e],f+=this.buffer[e+3]<<24>>>0):(f=this.buffer[e+1]<<16,f|=this.buffer[e+2]<<8,f|=this.buffer[e+3],f+=this.buffer[e]<<24>>>0),e+=4,e+f>this.buffer.length)throw RangeError("Index out of bounds: "+e+" + "+f+" <= "+this.buffer.length);return r=this.buffer.toString("utf8",e,e+f),e+=f,t?(this.offset=e,r):{string:r,length:e-i}},o.METRICS_CHARS="c",o.METRICS_BYTES="b",h.writeUTF8String=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}var i;i=f.byteLength(e,"utf8"),t+=i;var n=this.buffer.length;return t>n&&this.resize((n*=2)>t?n:t),t-=i,t+=this.buffer.write(e,t,i,"utf8"),r?(this.offset=t,this):i},h.writeString=h.writeUTF8String,o.calculateUTF8Chars=function(t){return a.calculateUTF16asUTF8(e(t))[0]},o.calculateUTF8Bytes=function(e){if("string"!=typeof e)throw TypeError("Illegal argument: "+typeof e);return f.byteLength(e,"utf8")},h.readUTF8String=function(e,r,f){"number"==typeof r&&(f=r,r=void 0);var i="undefined"==typeof f;if(i&&(f=this.offset),"undefined"==typeof r&&(r=o.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof f||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,0>f||f+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+f+" (+0) <= "+this.buffer.length)}var n,s,h=0,u=f;if(r===o.METRICS_CHARS){if(s=t(),a.decodeUTF8(function(){return e>h&&f<this.limit?this.buffer[f++]:null}.bind(this),function(e){++h,a.UTF8toUTF16(e,s)}.bind(this)),h!==e)throw RangeError("Illegal range: Truncated data, "+h+" == "+e);return i?(this.offset=f,s()):{string:s(),length:f-u}}if(r===o.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof f||f%1!==0)throw TypeError("Illegal offset: "+f+" (not an integer)");if(f>>>=0,0>f||f+e>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+f+" (+"+e+") <= "+this.buffer.length)}return n=this.buffer.toString("utf8",f,f+e),i?(this.offset+=e,n):{string:n,length:e}}throw TypeError("Unsupported metrics: "+r)},h.readString=h.readUTF8String,h.writeVString=function(e,t){var r="undefined"==typeof t;if(r&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.length)}var i,n,s=t;i=f.byteLength(e,"utf8"),n=o.calculateVarint32(i),t+=n+i;var h=this.buffer.length;return t>h&&this.resize((h*=2)>t?h:t),t-=n+i,t+=this.writeVarint32(i,t),t+=this.buffer.write(e,t,i,"utf8"),r?(this.offset=t,this):t-s},h.readVString=function(e){var t="undefined"==typeof e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.length)}var r,f=this.readVarint32(e),i=e;if(e+=f.length,f=f.value,e+f>this.buffer.length)throw RangeError("Index out of bounds: "+e+" + "+val.value+" <= "+this.buffer.length);return r=this.buffer.toString("utf8",e,e+f),e+=f,t?(this.offset=e,r):{string:r,length:e-i}},h.append=function(e,t,r){("number"==typeof t||"string"!=typeof t)&&(r=t,t=void 0);var f="undefined"==typeof r;if(f&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.length)}e instanceof o||(e=o.wrap(e,t));var i=e.limit-e.offset;if(0>=i)return this;r+=i;var n=this.buffer.length;return r>n&&this.resize((n*=2)>r?n:r),r-=i,e.buffer.copy(this.buffer,r,e.offset,e.limit),e.offset+=i,f&&(this.offset+=i),this},h.appendTo=function(e,t){return e.append(this,t),this},h.assert=function(e){return this.noAssert=!e,this},h.capacity=function(){return this.buffer.length},h.clear=function(){return this.offset=0,this.limit=this.buffer.length,this.markedOffset=-1,this},h.clone=function(e){var t=new o(0,this.littleEndian,this.noAssert);if(e){var r=new f(this.buffer.length);this.buffer.copy(r),t.buffer=r}else t.buffer=this.buffer;return t.offset=this.offset,t.markedOffset=this.markedOffset,t.limit=this.limit,t},h.compact=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}if(0===e&&t===this.buffer.length)return this;var r=t-e;if(0===r)return this.buffer=u,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new f(r);return this.buffer.copy(i,0,e,t),this.buffer=i,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=r,this},h.copy=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}if(e===t)return new o(0,this.littleEndian,this.noAssert);var r=t-e,f=new o(r,this.littleEndian,this.noAssert);return f.offset=0,f.limit=r,f.markedOffset>=0&&(f.markedOffset-=e),this.copyTo(f,0,e,t),f},h.copyTo=function(e,t,r,f){var i,n;if(!this.noAssert&&!o.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(t=(n="undefined"==typeof t)?e.offset:0|t,r=(i="undefined"==typeof r)?this.offset:0|r,f="undefined"==typeof f?this.limit:0|f,0>t||t>e.buffer.length)throw RangeError("Illegal target range: 0 <= "+t+" <= "+e.buffer.length);if(0>r||f>this.buffer.length)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.length);var s=f-r;return 0===s?e:(e.ensureCapacity(t+s),this.buffer.copy(e.buffer,t,r,f),i&&(this.offset+=s),n&&(e.offset+=s),this)},h.ensureCapacity=function(e){var t=this.buffer.length;return e>t?this.resize((t*=2)>e?t:e):this},h.fill=function(e,t,r){var f="undefined"==typeof t;if(f&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),"undefined"==typeof t&&(t=this.offset),"undefined"==typeof r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,0>t||t>r||r>this.buffer.length)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.length)}return t>=r?this:(this.buffer.fill(e,t,r),t=r,f&&(this.offset=t),this)},h.flip=function(){return this.limit=this.offset,this.offset=0,this},h.mark=function(e){if(e="undefined"==typeof e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.length)}return this.markedOffset=e,this},h.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},h.LE=function(e){return this.littleEndian="undefined"!=typeof e?!!e:!0,this},h.BE=function(e){return this.littleEndian="undefined"!=typeof e?!e:!1,this},h.prepend=function(e,t,r){("number"==typeof t||"string"!=typeof t)&&(r=t,t=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.length)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.length)}e instanceof o||(e=o.wrap(e,t));var n=e.limit-e.offset;if(0>=n)return this;var s=n-r;if(s>0){var h=new f(this.buffer.length+s);this.buffer.copy(h,n,r,this.buffer.length),this.buffer=h,this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}return e.buffer.copy(this.buffer,r-n,e.offset,e.limit),e.offset=e.limit,i&&(this.offset-=n),this},h.prependTo=function(e,t){return e.prepend(this,t),this},h.printDebug=function(e){"function"!=typeof e&&(e=console.log.bind(console)),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},h.remaining=function(){return this.limit-this.offset},h.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},h.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if(e|=0,0>e)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.length<e){var t=new f(e);this.buffer.copy(t),this.buffer=t}return this},h.reverse=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}return e===t?this:(Array.prototype.reverse.call(this.buffer.slice(e,t)),this)},h.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal length: "+e+" (not an integer)");
e|=0}var t=this.offset+e;if(!this.noAssert&&(0>t||t>this.buffer.length))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.length);return this.offset=t,this},h.slice=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}var r=this.clone();return r.offset=e,r.limit=t,r},h.toBuffer=function(e){var t=this.offset,r=this.limit;if(t>r){var i=t;t=r,r=i}if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,0>t||t>r||r>this.buffer.length)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.length)}if(e){var n=new f(r-t);return this.buffer.copy(n,0,t,r),n}return 0===t&&r===this.buffer.length?this.buffer:this.buffer.slice(t,r)},h.toArrayBuffer=function(){var e=this.offset,t=this.limit;if(e>t){var r=e;e=t,t=r}if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal limit: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}var f=new ArrayBuffer(t-e);if(n)n(f,0,this.buffer,e,t);else for(var i=new Uint8Array(f),s=e;t>s;++s)i[s-e]=this.buffer[s];return f},h.toString=function(e,t,r){if("undefined"==typeof e)return"ByteBufferNB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(e="utf8",t=e,r=t),e){case"utf8":return this.toUTF8(t,r);case"base64":return this.toBase64(t,r);case"hex":return this.toHex(t,r);case"binary":return this.toBinary(t,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}},h.toBase64=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}return this.buffer.toString("base64",e,t)},o.fromBase64=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%4!==0)throw TypeError("Illegal str: Length not a multiple of 4")}var i=new o(0,t,r);return i.buffer=new f(e,"base64"),i.limit=i.buffer.length,i},o.btoa=function(e){return o.fromBinary(e).toBase64()},o.atob=function(e){return o.fromBase64(e).toBinary()},h.toBinary=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}return this.buffer.toString("binary",e,t)},o.fromBinary=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new o(0,t,r);return i.buffer=new f(e,"binary"),i.limit=i.buffer.length,i},h.toDebug=function(e){for(var t,r=-1,f=this.buffer.length,i="",n="",s="";f>r;){if(-1!==r&&(t=this.buffer[r],i+=16>t?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(n+=t>32&&127>t?String.fromCharCode(t):".")),++r,e&&r>0&&r%16===0&&r!==f){for(;i.length<51;)i+=" ";s+=i+n+"\n",i=n=""}i+=r===this.offset&&r===this.limit?r===this.markedOffset?"!":"|":r===this.offset?r===this.markedOffset?"[":"<":r===this.limit?r===this.markedOffset?"]":">":r===this.markedOffset?"'":e||0!==r&&r!==f?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";s+=i+n+"\n"}return e?s:i},o.fromDebug=function(e,t,r){for(var f,i,n=e.length,s=new o((n+1)/3|0,t,r),h=0,u=0,l=!1,a=!1,g=!1,b=!1,p=!1;n>h;){switch(f=e.charAt(h++)){case"!":if(!r){if(a||g||b){p=!0;break}a=g=b=!0}s.offset=s.markedOffset=s.limit=u,l=!1;break;case"|":if(!r){if(a||b){p=!0;break}a=b=!0}s.offset=s.limit=u,l=!1;break;case"[":if(!r){if(a||g){p=!0;break}a=g=!0}s.offset=s.markedOffset=u,l=!1;break;case"<":if(!r){if(a){p=!0;break}a=!0}s.offset=u,l=!1;break;case"]":if(!r){if(b||g){p=!0;break}b=g=!0}s.limit=s.markedOffset=u,l=!1;break;case">":if(!r){if(b){p=!0;break}b=!0}s.limit=u,l=!1;break;case"'":if(!r){if(g){p=!0;break}g=!0}s.markedOffset=u,l=!1;break;case" ":l=!1;break;default:if(!r&&l){p=!0;break}if(i=parseInt(f+e.charAt(h++),16),!r&&(isNaN(i)||0>i||i>255))throw TypeError("Illegal str: Not a debug encoded string");s.buffer[u++]=i,l=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!a||!b)throw TypeError("Illegal str: Missing offset or limit");if(u<s.buffer.length)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+u+" < "+n)}return s},h.toHex=function(e,t){if(e="undefined"==typeof e?this.offset:e,t="undefined"==typeof t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}return this.buffer.toString("hex",e,t)},o.fromHex=function(e,t,r){if(!r){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}var i=new o(0,t,!0);return i.buffer=new f(e,"hex"),i.limit=i.buffer.length,i};var a=function(){var e={};return e.MAX_CODEPOINT=1114111,e.encodeUTF8=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)128>r?t(127&r):2048>r?(t(r>>6&31|192),t(63&r|128)):65536>r?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},e.decodeUTF8=function(e,t){for(var r,f,i,n,s=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0===(128&r))t(r);else if(192===(224&r))null===(f=e())&&s([r,f]),t((31&r)<<6|63&f);else if(224===(240&r))(null===(f=e())||null===(i=e()))&&s([r,f,i]),t((15&r)<<12|(63&f)<<6|63&i);else{if(240!==(248&r))throw RangeError("Illegal starting byte: "+r);(null===(f=e())||null===(i=e())||null===(n=e()))&&s([r,f,i,n]),t((7&r)<<18|(63&f)<<12|(63&i)<<6|63&n)}},e.UTF16toUTF8=function(e,t){for(var r,f=null;;){if(null===(r=null!==f?f:e()))break;r>=55296&&57343>=r&&null!==(f=e())&&f>=56320&&57343>=f?(t(1024*(r-55296)+f-56320+65536),f=null):t(r)}null!==f&&t(f)},e.UTF8toUTF16=function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)65535>=r?t(r):(r-=65536,t((r>>10)+55296),t(r%1024+56320)),r=null},e.encodeUTF16toUTF8=function(t,r){e.UTF16toUTF8(t,function(t){e.encodeUTF8(t,r)})},e.decodeUTF8toUTF16=function(t,r){e.decodeUTF8(t,function(t){e.UTF8toUTF16(t,r)})},e.calculateCodePoint=function(e){return 128>e?1:2048>e?2:65536>e?3:4},e.calculateUTF8=function(t){for(var r,f=0;null!==(r=t());)f+=e.calculateCodePoint(r);return f},e.calculateUTF16asUTF8=function(t){var r=0,f=0;return e.UTF16toUTF8(t,function(t){++r,f+=e.calculateCodePoint(t)}),[r,f]},e}();return h.toUTF8=function(e,t){if("undefined"==typeof e&&(e=this.offset),"undefined"==typeof t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!==0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,0>e||e>t||t>this.buffer.length)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.length)}return this.buffer.toString("utf8",e,t)},o.fromUTF8=function(e,t,r){if(!r&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new o(0,t,r);return i.buffer=new f(e,"utf8"),i.limit=i.buffer.length,i},o.memcpy=n,o}();