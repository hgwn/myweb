!function(){function e(e,n){window.XMLHttpRequest.prototype[e]=n(window.XMLHttpRequest.prototype[e])}function n(e,n,t,r,o,l,f){function s(){return"input"===n[0].tagName.toLowerCase()&&n.attr("type")&&"file"===n.attr("type").toLowerCase()}function u(n){if(!v){v=!0;try{for(var f=n.__files_||n.target&&n.target.files,s=[],u=[],c=0;c<f.length;c++){var d=f.item(c);a(e,o,t,d,n)?s.push(d):u.push(d)}i(o,l,e,r,t,t.ngfChange||t.ngfSelect,s,u,n),0==s.length&&(n.target.value=s)}finally{v=!1}}}function c(r){t.ngfMultiple&&r.attr("multiple",o(t.ngfMultiple)(e)),o(t.ngfMultiple)(e)||r.attr("multiple",void 0),t.accept&&r.attr("accept",t.accept),t.ngfCapture&&r.attr("capture",o(t.ngfCapture)(e));for(var i=0;i<n[0].attributes.length;i++){var a=n[0].attributes[i];(s()&&"type"!==a.name||"type"!==a.name&&"class"!==a.name&&"id"!==a.name&&"style"!==a.name)&&r.attr(a.name,a.value)}}function d(t){if(!n.attr("disabled")){var r=angular.element('<input type="file">');return c(r),s()?(n.replaceWith(r),n=r,r.attr("__ngf_gen__",!0),f(n)(e)):(r.css("display","none").css("position","absolute").css("z-index","-100000").attr("tabindex","-1"),n.__ngf_ref_elem__&&n.__ngf_ref_elem__.remove(),n.__ngf_ref_elem__=r,document.body.appendChild(r[0])),r}}function p(n){i(o,l,e,r,t,t.ngfChange||t.ngfSelect,[],[],n,!0)}function g(t){function r(e,t){null!=e&&t&&i[0].click(),s()&&n.bind("click touchend",g)}null!=t&&(t.preventDefault(),t.stopPropagation());var i=d(t);return i&&(i.bind("change",u),t&&p(t),navigator.userAgent.toLowerCase().match(/android/)?setTimeout(function(){r(t,void 0==e.openFile?!0:e.openFile)},0):r(t,void 0==e.openFile?!0:e.openFile)),!1}if(!n.attr("__ngf_gen__")){var v=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(n,d,c,u,p):(g(),s()||n.bind("click touchend",g))}}function t(e,n,t,o,l,f,s){function u(e,n,t){var r=!0,i=t.dataTransfer.items;if(null!=i)for(var o=0;o<i.length&&r;o++)r=r&&("file"==i[o].kind||""==i[o].kind)&&a(e,l,n,i[o],t);var f=l(n.ngfDragOverClass)(e,{$event:t});return f&&(f.delay&&(h=f.delay),f.accept&&(f=r?f.accept:f.reject)),f||n.ngfDragOverClass||"dragover"}function c(n,r,i,o){function u(r){a(e,l,t,r,n)?d.push(r):p.push(r)}function c(e,n,t){if(null!=n)if(n.isDirectory){var r=(t||"")+n.name;u({name:n.name,type:"directory",path:r});var i=n.createReader(),a=[];v++;var o=function(){i.readEntries(function(r){try{if(r.length)a=a.concat(Array.prototype.slice.call(r||[],0)),o();else{for(var i=0;i<a.length;i++)c(e,a[i],(t?t:"")+n.name+"/");v--}}catch(l){v--,console.error(l)}},function(){v--})};o()}else v++,n.file(function(e){try{v--,e.path=(t?t:"")+e.name,u(e)}catch(n){v--,console.error(n)}},function(){v--})}var d=[],p=[],g=n.dataTransfer.items,v=0;if(g&&g.length>0&&"file"!=s.protocol())for(var h=0;h<g.length;h++){if(g[h].webkitGetAsEntry&&g[h].webkitGetAsEntry()&&g[h].webkitGetAsEntry().isDirectory){var m=g[h].webkitGetAsEntry();if(m.isDirectory&&!i)continue;null!=m&&c(d,m)}else{var y=g[h].getAsFile();null!=y&&u(y)}if(!o&&d.length>0)break}else{var w=n.dataTransfer.files;if(null!=w)for(var h=0;h<w.length&&(u(w.item(h)),o||!(d.length>0));h++);}var _=0;!function A(e){f(function(){if(v)10*_++<2e4&&A(10);else{if(!o&&d.length>1){for(h=0;"directory"==d[h].type;)h++;d=[d[h]]}r(d,p)}},e||0)}()}var d=r();if(t.dropAvailable&&f(function(){e[t.dropAvailable]?e[t.dropAvailable].value=d:e[t.dropAvailable]=d}),!d)return void(1==l(t.ngfHideOnDropNotAvailable)(e)&&n.css("display","none"));var p,g=null,v=l(t.ngfStopPropagation),h=1;l(t.ngfAccept);n[0].addEventListener("dragover",function(r){if(!n.attr("disabled")){if(r.preventDefault(),v(e)&&r.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=r.dataTransfer.effectAllowed;r.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}f.cancel(g),e.actualDragOverClass||(p=u(e,t,r)),n.addClass(p)}},!1),n[0].addEventListener("dragenter",function(t){n.attr("disabled")||(t.preventDefault(),v(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(){n.attr("disabled")||(g=f(function(){n.removeClass(p),p=null},h||1))},!1),n[0].addEventListener("drop",function(r){n.attr("disabled")||(r.preventDefault(),v(e)&&r.stopPropagation(),n.removeClass(p),p=null,c(r,function(n,a){i(l,f,e,o,t,t.ngfChange||t.ngfDrop,n,a,r)},0!=l(t.ngfAllowDir)(e),t.multiple||l(t.ngfMultiple)(e)))},!1)}function r(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e}function i(e,n,t,r,i,a,o,l,f,s){function u(){r&&(e(i.ngModel).assign(t,o),n(function(){r&&r.$setViewValue(null!=o&&0==o.length?null:o)})),i.ngModelRejected&&e(i.ngModelRejected).assign(t,l),a&&e(a)(t,{$files:o,$rejectedFiles:l,$event:f})}s?u():n(function(){u()})}function a(e,n,t,r,i){var a=n(t.ngfAccept)(e,{$file:r,$event:i}),l=n(t.ngfMaxSize)(e,{$file:r,$event:i})||9007199254740991,f=n(t.ngfMinSize)(e,{$file:r,$event:i})||-1;if(null!=a&&angular.isString(a)){var s=new RegExp(o(a),"gi");a=null!=r.type&&s.test(r.type.toLowerCase())||null!=r.name&&s.test(r.name.toLowerCase())}return(null==a||a)&&(null==r.size||r.size<l&&r.size>f)}function o(e){if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])return e.substring(1,e.length-1);var n=e.split(","),t="";if(n.length>1)for(var r=0;r<n.length;r++)t+="("+o(n[r])+")",r<n.length-1&&(t+="|");else 0==e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,".");return t}var l;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&e("setRequestHeader",function(e){return function(n,t){if("__setXHR_"===n){var r=t(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}});var f=angular.module("ngFileUpload",[]);f.version="4.2.4",f.service("Upload",["$http","$q","$timeout",function(e,n,t){function r(r){r.method=r.method||"POST",r.headers=r.headers||{},r.transformRequest=r.transformRequest||function(n,t){return window.ArrayBuffer&&n instanceof window.ArrayBuffer?n:e.defaults.transformRequest[0](n,t)};var i=n.defer(),a=i.promise;return r.headers.__setXHR_=function(){return function(e){e&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i.notify?i.notify(e):a.progress_fn&&t(function(){a.progress_fn(e)})},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i.notify?i.notify(e):a.progress_fn&&t(function(){a.progress_fn(e)}))},!1))}},e(r).then(function(e){i.resolve(e)},function(e){i.reject(e)},function(e){i.notify(e)}),a.success=function(e){return a.then(function(n){e(n.data,n.status,n.headers,r)}),a},a.error=function(e){return a.then(null,function(n){e(n.data,n.status,n.headers,r)}),a},a.progress=function(e){return a.progress_fn=e,a.then(null,null,function(n){e(n)}),a},a.abort=function(){return r.__XHR&&t(function(){r.__XHR.abort()}),a},a.xhr=function(e){return r.xhrFn=function(n){return function(){n&&n.apply(a,arguments),e.apply(a,arguments)}}(r.xhrFn),a},a}this.upload=function(e){return e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(n){var t=new FormData,r={};for(l in e.fields)e.fields.hasOwnProperty(l)&&(r[l]=e.fields[l]);if(n&&(r.data=n),e.formDataAppender)for(l in r)r.hasOwnProperty(l)&&e.formDataAppender(t,l,r[l]);else for(l in r)if(r.hasOwnProperty(l)){var i=r[l];void 0!==i&&(angular.isDate(i)&&(i=i.toISOString()),angular.isString(i)?t.append(l,i):e.sendObjectsAsJsonBlob&&angular.isObject(i)?t.append(l,new Blob([i],{type:"application/json"})):t.append(l,JSON.stringify(i)))}if(null!=e.file){var a=e.fileFormDataName||"file";if(angular.isArray(e.file))for(var o=angular.isString(a),f=0;f<e.file.length;f++)t.append(o?a:a[f],e.file[f],e.fileName&&e.fileName[f]||e.file[f].name);else t.append(a,e.file,e.fileName||e.file.name)}return t}),r(e)},this.http=function(e){return r(e)}}]),f.directive("ngfSelect",["$parse","$timeout","$compile",function(e,t,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,o,l){n(i,a,o,l,e,t,r)}}}]),f.directive("ngfDrop",["$parse","$timeout","$location",function(e,n,r){return{restrict:"AEC",require:"?ngModel",link:function(i,a,o,l){t(i,a,o,l,e,n,r)}}}]),f.directive("ngfNoFileDrop",function(){return function(e,n){r()&&n.css("display","none")}}),f.directive("ngfDropAvailable",["$parse","$timeout",function(e,n){return function(t,i,a){if(r()){var o=e(a.ngfDropAvailable);n(function(){o(t),o.assign&&o.assign(t,!0)})}}}]),f.directive("ngfSrc",["$parse","$timeout",function(e,n){return{restrict:"AE",link:function(t,r,i,o){window.FileReader&&t.$watch(i.ngfSrc,function(o){o&&a(t,e,i,o,null)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||o.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||o.size<4e6)?n(function(){var e=window.URL||window.webkitURL;if(e&&e.createObjectURL)r.attr("src",e.createObjectURL(o));else{var t=new FileReader;t.readAsDataURL(o),t.onload=function(e){n(function(){r.attr("src",e.target.result)})}}}):r.attr("src",i.ngfDefaultSrc||"")})}}}])}();