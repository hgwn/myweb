!function(e){var t=new Array("00","33","66","99","CC","FF"),r=new Array("FF0000","00FF00","0000FF","FFFF00","00FFFF","FF00FF");e.fn.colorpicker=function(o){function a(){e("body").append('<div id="colorpanel" style="position: absolute; display: none;"></div>');var o="",a="";for(i=0;i<2;i++)for(j=0;j<6;j++)for(o+="<tr height=12>",o+='<td width=11 rel="#000000" style="background-color:#000000">',a=0==i?t[j]+t[j]+t[j]:r[j],o=o+'<td width=11 rel="#'+a+'" style="background-color:#'+a+'">',o+='<td width=11 rel="#000000" style="background-color:#000000">',k=0;k<3;k++)for(l=0;l<6;l++)a=t[k+3*i]+t[l]+t[j],o=o+'<td width=11 rel="#'+a+'" style="background-color:#'+a+'">';o='<table width=253 border="0" cellspacing="0" cellpadding="0" style="border:1px solid #000;"><tr height=30><td colspan=21 bgcolor=#cccccc><table cellpadding="0" cellspacing="1" border="0" style="border-collapse: collapse"><tr><td width="3"><td><input type="text" id="DisColor" size="6" disabled style="border:solid 1px #000000;background-color:#ffff00"></td><td width="3"><td><input type="text" id="HexColor" size="7" style="border:inset 1px;font-family:Arial;" value="#000000"><a href="javascript:void(0);" id="_cclose">关闭</a> | <a href="javascript:void(0);" id="_creset">清除</a></td></tr></table></td></table><table id="CT" border="1" cellspacing="0" cellpadding="0" style="border-collapse: collapse" bordercolor="000000"  style="cursor:pointer;">'+o+"</table>",e("#colorpanel").html(o),e("body").delegate("#_cclose","click",function(){return e("#colorpanel").hide(),!1}).css({"font-size":"12px","padding-left":"20px"})}function c(e){var t;return e&&e.constructor==Array&&3==e.length&&(e=e),(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))&&(e=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]),(t=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(e))&&(e=[2.55*parseFloat(t[1]),2.55*parseFloat(t[2]),2.55*parseFloat(t[3])]),(t=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(e))&&(e=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]),(t=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(e))&&(e=[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]),"rgb("+e[0]+","+e[1]+","+e[2]+")"}var s=jQuery.extend({},jQuery.fn.colorpicker.defaults,o);return a(),this.each(function(){var t=e(this);t.bind(s.event,function(){var r=e(this).offset().top,l=e(this).height(),o=e(this).offset().left+300>e("body").width()?e(this).offset().left-260:e(this).offset().left;e("#colorpanel").css({top:r+l+5,left:o,"z-index":102}).show();var a=s.target?e(s.target):t;null==a.data("color")&&a.data("color",a.css("color")),null==a.data("value")&&a.data("value",a.val()),e("#_creset").bind("click",function(){a.css("color",a.data("color")).val(a.data("value")),s.clearColor&&s.clearColor(),e("#colorpanel").hide(),s.reset(t)}),e("#CT tr td").unbind("click").mouseover(function(){var t=e(this).css("background-color");e("#DisColor").css("background",t),e("#HexColor").val(e(this).attr("rel"))}).click(function(){var r=e(this).attr("rel");r=s.ishex?r:c(r),s.fillcolor&&a.val(r),a.css("color",r),e("#colorpanel").hide(),e("#_creset").unbind("click"),s.success(t,r)})})})},jQuery.fn.colorpicker.defaults={ishex:!0,fillcolor:!1,target:null,event:"click",success:function(){},clearColor:"",reset:function(){}}}(jQuery);