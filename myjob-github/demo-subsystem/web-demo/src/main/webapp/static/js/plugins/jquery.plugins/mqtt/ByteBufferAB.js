!function(t){"use strict";function e(t){function e(t){var e=0;return function(){return e<t.length?t.charCodeAt(e++):null}}function r(){var t=[],e=[];return function(){return 0===arguments.length?e.join("")+s.apply(String,t):(t.length+arguments.length>1024&&(e.push(s.apply(String,t)),t.length=0),void Array.prototype.push.apply(t,arguments))}}var n=function(t,e,r){if("undefined"==typeof t&&(t=n.DEFAULT_CAPACITY),"undefined"==typeof e&&(e=n.DEFAULT_ENDIAN),"undefined"==typeof r&&(r=n.DEFAULT_NOASSERT),!r){if(t=0|t,0>t)throw RangeError("Illegal capacity");e=!!e,r=!!r}this.buffer=0===t?o:new ArrayBuffer(t),this.view=0===t?null:new DataView(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=t,this.littleEndian="undefined"!=typeof e?!!e:!1,this.noAssert=!!r};n.VERSION="3.5.4",n.LITTLE_ENDIAN=!0,n.BIG_ENDIAN=!1,n.DEFAULT_CAPACITY=16,n.DEFAULT_ENDIAN=n.BIG_ENDIAN,n.DEFAULT_NOASSERT=!1,n.Long=t||null;var f=n.prototype,o=new ArrayBuffer(0),s=String.fromCharCode;n.allocate=function(t,e,r){return new n(t,e,r)},n.concat=function(t,e,r,i){("boolean"==typeof e||"string"!=typeof e)&&(i=r,r=e,e=void 0);for(var f,o=0,s=0,h=t.length;h>s;++s)n.isByteBuffer(t[s])||(t[s]=n.wrap(t[s],e)),f=t[s].limit-t[s].offset,f>0&&(o+=f);if(0===o)return new n(0,r,i);var a,l=new n(o,r,i),u=new Uint8Array(l.buffer);for(s=0;h>s;)a=t[s++],f=a.limit-a.offset,0>=f||(u.set(new Uint8Array(a.buffer).subarray(a.offset,a.limit),l.offset),l.offset+=f);return l.limit=l.offset,l.offset=0,l},n.isByteBuffer=function(t){return(t&&t instanceof n)===!0},n.type=function(){return ArrayBuffer},n.wrap=function(t,e,r,o){if("string"!=typeof e&&(o=r,r=e,e=void 0),"string"==typeof t)switch("undefined"==typeof e&&(e="utf8"),e){case"base64":return n.fromBase64(t,r);case"hex":return n.fromHex(t,r);case"binary":return n.fromBinary(t,r);case"utf8":return n.fromUTF8(t,r);case"debug":return n.fromDebug(t,r);default:throw Error("Unsupported encoding: "+e)}if(null===t||"object"!=typeof t)throw TypeError("Illegal buffer");var s;if(n.isByteBuffer(t))return s=f.clone.call(t),s.markedOffset=-1,s;if(t instanceof Uint8Array)s=new n(0,r,o),t.length>0&&(s.buffer=t.buffer,s.offset=t.byteOffset,s.limit=t.byteOffset+t.length,s.view=t.length>0?new DataView(t.buffer):null);else if(t instanceof ArrayBuffer)s=new n(0,r,o),t.byteLength>0&&(s.buffer=t,s.offset=0,s.limit=t.byteLength,s.view=t.byteLength>0?new DataView(t):null);else{if("[object Array]"!==Object.prototype.toString.call(t))throw TypeError("Illegal buffer");for(s=new n(t.length,r,o),s.limit=t.length,i=0;i<t.length;++i)s.view.setUint8(i,t[i])}return s},f.writeInt8=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=1,this.view.setInt8(e,t),r&&(this.offset+=1),this},f.writeByte=f.writeInt8,f.readInt8=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getInt8(t);return e&&(this.offset+=1),r},f.readByte=f.readInt8,f.writeUint8=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=1;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=1,this.view.setUint8(e,t),r&&(this.offset+=1),this},f.readUint8=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r=this.view.getUint8(t);return e&&(this.offset+=1),r},f.writeInt16=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=2,this.view.setInt16(e,t,this.littleEndian),r&&(this.offset+=2),this},f.writeShort=f.writeInt16,f.readInt16=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getInt16(t,this.littleEndian);return e&&(this.offset+=2),r},f.readShort=f.readInt16,f.writeUint16=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=2;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=2,this.view.setUint16(e,t,this.littleEndian),r&&(this.offset+=2),this},f.readUint16=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+2) <= "+this.buffer.byteLength)}var r=this.view.getUint16(t,this.littleEndian);return e&&(this.offset+=2),r},f.writeInt32=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=4,this.view.setInt32(e,t,this.littleEndian),r&&(this.offset+=4),this},f.writeInt=f.writeInt32,f.readInt32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getInt32(t,this.littleEndian);return e&&(this.offset+=4),r},f.readInt=f.readInt32,f.writeUint32=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=4,this.view.setUint32(e,t,this.littleEndian),r&&(this.offset+=4),this},f.readUint32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getUint32(t,this.littleEndian);return e&&(this.offset+=4),r},t&&(f.writeInt64=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e&&(e=t.fromNumber(e)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.littleEndian?(this.view.setInt32(r,e.low,!0),this.view.setInt32(r+4,e.high,!0)):(this.view.setInt32(r,e.high,!1),this.view.setInt32(r+4,e.low,!1)),i&&(this.offset+=8),this},f.writeLong=f.writeInt64,f.readInt64=function(e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=this.littleEndian?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!1):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!1);return r&&(this.offset+=8),i},f.readLong=f.readInt64,f.writeUint64=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e&&(e=t.fromNumber(e)),r+=8;var n=this.buffer.byteLength;return r>n&&this.resize((n*=2)>r?n:r),r-=8,this.littleEndian?(this.view.setInt32(r,e.low,!0),this.view.setInt32(r+4,e.high,!0)):(this.view.setInt32(r,e.high,!1),this.view.setInt32(r+4,e.low,!1)),i&&(this.offset+=8),this},f.readUint64=function(e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var i=this.littleEndian?new t(this.view.getInt32(e,!0),this.view.getInt32(e+4,!0),!0):new t(this.view.getInt32(e+4,!1),this.view.getInt32(e,!1),!0);return r&&(this.offset+=8),i}),f.writeFloat32=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=4;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=4,this.view.setFloat32(e,t,this.littleEndian),r&&(this.offset+=4),this},f.writeFloat=f.writeFloat32,f.readFloat32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var r=this.view.getFloat32(t,this.littleEndian);return e&&(this.offset+=4),r},f.readFloat=f.readFloat32,f.writeFloat64=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t)throw TypeError("Illegal value: "+t+" (not a number)");if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}e+=8;var i=this.buffer.byteLength;return e>i&&this.resize((i*=2)>e?i:e),e-=8,this.view.setFloat64(e,t,this.littleEndian),r&&(this.offset+=8),this},f.writeDouble=f.writeFloat64,f.readFloat64=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var r=this.view.getFloat64(t,this.littleEndian);return e&&(this.offset+=8),r},f.readDouble=f.readFloat64,n.MAX_VARINT32_BYTES=5,n.calculateVarint32=function(t){return t>>>=0,128>t?1:16384>t?2:1<<21>t?3:1<<28>t?4:5},n.zigZagEncode32=function(t){return((t|=0)<<1^t>>31)>>>0},n.zigZagDecode32=function(t){return t>>>1^-(1&t)|0},f.writeVarint32=function(t,e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}var i,f=n.calculateVarint32(t);e+=f;var o=this.buffer.byteLength;return e>o&&this.resize((o*=2)>e?o:e),e-=f,this.view.setUint8(e,i=128|t),t>>>=0,t>=128?(i=t>>7|128,this.view.setUint8(e+1,i),t>=16384?(i=t>>14|128,this.view.setUint8(e+2,i),t>=1<<21?(i=t>>21|128,this.view.setUint8(e+3,i),t>=1<<28?(this.view.setUint8(e+4,t>>28&15),f=5):(this.view.setUint8(e+3,127&i),f=4)):(this.view.setUint8(e+2,127&i),f=3)):(this.view.setUint8(e+1,127&i),f=2)):(this.view.setUint8(e,127&i),f=1),r?(this.offset+=f,this):f},f.writeVarint32ZigZag=function(t,e){return this.writeVarint32(n.zigZagEncode32(t),e)},f.readVarint32=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var r,i,n=0,f=0;do{if(i=t+n,!this.noAssert&&i>this.limit){var o=Error("Truncated");throw o.truncated=!0,o}r=this.view.getUint8(i),5>n&&(f|=(127&r)<<7*n>>>0),++n}while(128===(128&r));return f=0|f,e?(this.offset+=n,f):{value:f,length:n}},f.readVarint32ZigZag=function(t){var e=this.readVarint32(t);return"object"==typeof e?e.value=n.zigZagDecode32(e.value):e=n.zigZagDecode32(e),e},t&&(n.MAX_VARINT64_BYTES=10,n.calculateVarint64=function(e){"number"==typeof e&&(e=t.fromNumber(e));var r=e.toInt()>>>0,i=e.shiftRightUnsigned(28).toInt()>>>0,n=e.shiftRightUnsigned(56).toInt()>>>0;return 0==n?0==i?16384>r?128>r?1:2:1<<21>r?3:4:16384>i?128>i?5:6:1<<21>i?7:8:128>n?9:10},n.zigZagEncode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftLeft(1).xor(e.shiftRight(63)).toUnsigned()},n.zigZagDecode64=function(e){return"number"==typeof e?e=t.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned()),e.shiftRightUnsigned(1).xor(e.and(t.ONE).toSigned().negate()).toSigned()},f.writeVarint64=function(e,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"==typeof e)e=t.fromNumber(e);else if(!(e&&e instanceof t))throw TypeError("Illegal value: "+e+" (not an integer or Long)");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof e?e=t.fromNumber(e,!1):e.unsigned!==!1&&(e=e.toSigned());var f=n.calculateVarint64(e),o=e.toInt()>>>0,s=e.shiftRightUnsigned(28).toInt()>>>0,h=e.shiftRightUnsigned(56).toInt()>>>0;r+=f;var a=this.buffer.byteLength;switch(r>a&&this.resize((a*=2)>r?a:r),r-=f,f){case 10:this.view.setUint8(r+9,h>>>7&1);case 9:this.view.setUint8(r+8,9!==f?128|h:127&h);case 8:this.view.setUint8(r+7,8!==f?s>>>21|128:s>>>21&127);case 7:this.view.setUint8(r+6,7!==f?s>>>14|128:s>>>14&127);case 6:this.view.setUint8(r+5,6!==f?s>>>7|128:s>>>7&127);case 5:this.view.setUint8(r+4,5!==f?128|s:127&s);case 4:this.view.setUint8(r+3,4!==f?o>>>21|128:o>>>21&127);case 3:this.view.setUint8(r+2,3!==f?o>>>14|128:o>>>14&127);case 2:this.view.setUint8(r+1,2!==f?o>>>7|128:o>>>7&127);case 1:this.view.setUint8(r,1!==f?128|o:127&o)}return i?(this.offset+=f,this):f},f.writeVarint64ZigZag=function(t,e){return this.writeVarint64(n.zigZagEncode64(t),e)},f.readVarint64=function(e){var r="undefined"==typeof e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: "+e+" (not an integer)");if(e>>>=0,0>e||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var i=e,n=0,f=0,o=0,s=0;if(s=this.view.getUint8(e++),n=127&s,128&s&&(s=this.view.getUint8(e++),n|=(127&s)<<7,128&s&&(s=this.view.getUint8(e++),n|=(127&s)<<14,128&s&&(s=this.view.getUint8(e++),n|=(127&s)<<21,128&s&&(s=this.view.getUint8(e++),f=127&s,128&s&&(s=this.view.getUint8(e++),f|=(127&s)<<7,128&s&&(s=this.view.getUint8(e++),f|=(127&s)<<14,128&s&&(s=this.view.getUint8(e++),f|=(127&s)<<21,128&s&&(s=this.view.getUint8(e++),o=127&s,128&s&&(s=this.view.getUint8(e++),o|=(127&s)<<7,128&s))))))))))throw Error("Buffer overrun");var h=t.fromBits(n|f<<28,f>>>4|o<<24,!1);return r?(this.offset=e,h):{value:h,length:e-i}},f.readVarint64ZigZag=function(e){var r=this.readVarint64(e);return r&&r.value instanceof t?r.value=n.zigZagDecode64(r.value):r=n.zigZagDecode64(r),r}),f.writeCString=function(t,r){var i="undefined"==typeof r;i&&(r=this.offset);var n,f=t.length;if(!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");for(n=0;f>n;++n)if(0===t.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var o=r;f=a.calculateUTF16asUTF8(e(t))[1],r+=f+1;var s=this.buffer.byteLength;return r>s&&this.resize((s*=2)>r?s:r),r-=f+1,a.encodeUTF16toUTF8(e(t),function(t){this.view.setUint8(r++,t)}.bind(this)),this.view.setUint8(r++,0),i?(this.offset=r-o,this):f},f.readCString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=t,f=-1;return a.decodeUTF8toUTF16(function(){if(0===f)return null;if(t>=this.limit)throw RangeError("Illegal range: Truncated data, "+t+" < "+this.limit);return 0===(f=this.view.getUint8(t++))?null:f}.bind(this),i=r(),!0),e?(this.offset=t,i()):{string:i(),length:t-n}},f.writeIString=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,f=r;n=a.calculateUTF16asUTF8(e(t),this.noAssert)[1],r+=4+n;var o=this.buffer.byteLength;if(r>o&&this.resize((o*=2)>r?o:r),r-=4+n,this.view.setUint32(r,n,this.littleEndian),r+=4,a.encodeUTF16toUTF8(e(t),function(t){this.view.setUint8(r++,t)}.bind(this)),r!==f+4+n)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+4+n));return i?(this.offset=r,this):r-f},f.readIString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+4) <= "+this.buffer.byteLength)}var i,n=0,f=t;n=this.view.getUint32(t,this.littleEndian),t+=4;var o,s=t+n;return a.decodeUTF8toUTF16(function(){return s>t?this.view.getUint8(t++):null}.bind(this),o=r(),this.noAssert),i=o(),e?(this.offset=t,i):{string:i,length:t-f}},n.METRICS_CHARS="c",n.METRICS_BYTES="b",f.writeUTF8String=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var n,f=r;n=a.calculateUTF16asUTF8(e(t))[1],r+=n;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=n,a.encodeUTF16toUTF8(e(t),function(t){this.view.setUint8(r++,t)}.bind(this)),i?(this.offset=r,this):r-f},f.writeString=f.writeUTF8String,n.calculateUTF8Chars=function(t){return a.calculateUTF16asUTF8(e(t))[0]},n.calculateUTF8Bytes=function(t){return a.calculateUTF16asUTF8(e(t))[1]},f.readUTF8String=function(t,e,i){"number"==typeof e&&(i=e,e=void 0);var f="undefined"==typeof i;if(f&&(i=this.offset),"undefined"==typeof e&&(e=n.METRICS_CHARS),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal length: "+t+" (not an integer)");if(t|=0,"number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,0>i||i+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+0) <= "+this.buffer.byteLength)}var o,s=0,h=i;if(e===n.METRICS_CHARS){if(o=r(),a.decodeUTF8(function(){return t>s&&i<this.limit?this.view.getUint8(i++):null}.bind(this),function(t){++s,a.UTF8toUTF16(t,o)}.bind(this)),s!==t)throw RangeError("Illegal range: Truncated data, "+s+" == "+t);return f?(this.offset=i,o()):{string:o(),length:i-h}}if(e===n.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof i||i%1!==0)throw TypeError("Illegal offset: "+i+" (not an integer)");if(i>>>=0,0>i||i+t>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+i+" (+"+t+") <= "+this.buffer.byteLength)}var l=i+t;if(a.decodeUTF8toUTF16(function(){return l>i?this.view.getUint8(i++):null}.bind(this),o=r(),this.noAssert),i!==l)throw RangeError("Illegal range: Truncated data, "+i+" == "+l);return f?(this.offset=i,o()):{string:o(),length:i-h}}throw TypeError("Unsupported metrics: "+e)},f.readString=f.readUTF8String,f.writeVString=function(t,r){var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var f,o,s=r;f=a.calculateUTF16asUTF8(e(t),this.noAssert)[1],o=n.calculateVarint32(f),r+=o+f;var h=this.buffer.byteLength;if(r>h&&this.resize((h*=2)>r?h:r),r-=o+f,r+=this.writeVarint32(f,r),a.encodeUTF16toUTF8(e(t),function(t){this.view.setUint8(r++,t)}.bind(this)),r!==s+f+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+f+o));return i?(this.offset=r,this):r-s},f.readVString=function(t){var e="undefined"==typeof t;if(e&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var i,n=this.readVarint32(t),f=t;t+=n.length,n=n.value;var o=t+n,s=r();return a.decodeUTF8toUTF16(function(){return o>t?this.view.getUint8(t++):null}.bind(this),s,this.noAssert),i=s(),e?(this.offset=t,i):{string:i,length:t-f}},f.append=function(t,e,r){("number"==typeof e||"string"!=typeof e)&&(r=e,e=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof n||(t=n.wrap(t,e));var f=t.limit-t.offset;if(0>=f)return this;r+=f;var o=this.buffer.byteLength;return r>o&&this.resize((o*=2)>r?o:r),r-=f,new Uint8Array(this.buffer,r).set(new Uint8Array(t.buffer).subarray(t.offset,t.limit)),t.offset+=f,i&&(this.offset+=f),this},f.appendTo=function(t,e){return t.append(this,e),this},f.assert=function(t){return this.noAssert=!t,this},f.capacity=function(){return this.buffer.byteLength},f.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},f.clone=function(t){var e=new n(0,this.littleEndian,this.noAssert);if(t){var r=new ArrayBuffer(this.buffer.byteLength);new Uint8Array(r).set(this.buffer),e.buffer=r,e.view=new DataView(r)}else e.buffer=this.buffer,e.view=this.view;return e.offset=this.offset,e.markedOffset=this.markedOffset,e.limit=this.limit,e},f.compact=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(0===t&&e===this.buffer.byteLength)return this;var r=e-t;if(0===r)return this.buffer=o,this.view=null,this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(r);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(t,e)),this.buffer=i,this.view=new DataView(i),this.markedOffset>=0&&(this.markedOffset-=t),this.offset=0,this.limit=r,this},f.copy=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return new n(0,this.littleEndian,this.noAssert);var r=e-t,i=new n(r,this.littleEndian,this.noAssert);return i.offset=0,i.limit=r,i.markedOffset>=0&&(i.markedOffset-=t),this.copyTo(i,0,t,e),i},f.copyTo=function(t,e,r,i){var f,o;if(!this.noAssert&&!n.isByteBuffer(t))throw TypeError("Illegal target: Not a ByteBuffer");if(e=(o="undefined"==typeof e)?t.offset:0|e,r=(f="undefined"==typeof r)?this.offset:0|r,i="undefined"==typeof i?this.limit:0|i,0>e||e>t.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+e+" <= "+t.buffer.byteLength);if(0>r||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+r+" <= "+this.buffer.byteLength);var s=i-r;return 0===s?t:(t.ensureCapacity(e+s),new Uint8Array(t.buffer).set(new Uint8Array(this.buffer).subarray(r,i),e),f&&(this.offset+=s),o&&(t.offset+=s),this)},f.ensureCapacity=function(t){var e=this.buffer.byteLength;return t>e?this.resize((e*=2)>t?e:t):this},f.fill=function(t,e,r){var i="undefined"==typeof e;if(i&&(e=this.offset),"string"==typeof t&&t.length>0&&(t=t.charCodeAt(0)),"undefined"==typeof e&&(e=this.offset),"undefined"==typeof r&&(r=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal value: "+t+" (not an integer)");if(t|=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,0>e||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(e>=r)return this;for(;r>e;)this.view.setUint8(e++,t);return i&&(this.offset=e),this},f.flip=function(){return this.limit=this.offset,this.offset=0,this},f.mark=function(t){if(t="undefined"==typeof t?this.offset:t,!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal offset: "+t+" (not an integer)");if(t>>>=0,0>t||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=t,this},f.order=function(t){if(!this.noAssert&&"boolean"!=typeof t)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!t,this},f.LE=function(t){return this.littleEndian="undefined"!=typeof t?!!t:!0,this},f.BE=function(t){return this.littleEndian="undefined"!=typeof t?!t:!1,this},f.prepend=function(t,e,r){("number"==typeof e||"string"!=typeof e)&&(r=e,e=void 0);var i="undefined"==typeof r;if(i&&(r=this.offset),!this.noAssert){if("number"!=typeof r||r%1!==0)throw TypeError("Illegal offset: "+r+" (not an integer)");if(r>>>=0,0>r||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}t instanceof n||(t=n.wrap(t,e));var f=t.limit-t.offset;if(0>=f)return this;var o,s=f-r;if(s>0){var h=new ArrayBuffer(this.buffer.byteLength+s);o=new Uint8Array(h),o.set(new Uint8Array(this.buffer).subarray(r,this.buffer.byteLength),f),this.buffer=h,this.view=new DataView(h),this.offset+=s,this.markedOffset>=0&&(this.markedOffset+=s),this.limit+=s,r+=s}else o=new Uint8Array(this.buffer);return o.set(new Uint8Array(t.buffer).subarray(t.offset,t.limit),r-f),t.offset=t.limit,i&&(this.offset-=f),this},f.prependTo=function(t,e){return t.prepend(this,e),this},f.printDebug=function(t){"function"!=typeof t&&(t=console.log.bind(console)),t(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},f.remaining=function(){return this.limit-this.offset},f.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},f.resize=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal capacity: "+t+" (not an integer)");if(t|=0,0>t)throw RangeError("Illegal capacity: 0 <= "+t)}if(this.buffer.byteLength<t){var e=new ArrayBuffer(t);new Uint8Array(e).set(new Uint8Array(this.buffer)),this.buffer=e,this.view=new DataView(e)}return this},f.reverse=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}return t===e?this:(Array.prototype.reverse.call(new Uint8Array(this.buffer).subarray(t,e)),this.view=new DataView(this.buffer),this)},f.skip=function(t){if(!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal length: "+t+" (not an integer)");t|=0}var e=this.offset+t;if(!this.noAssert&&(0>e||e>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+t+" <= "+this.buffer.byteLength);return this.offset=e,this},f.slice=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=t,r.limit=e,r},f.toBuffer=function(t){var e=this.offset,r=this.limit;if(e>r){var i=e;e=r,r=i}if(!this.noAssert){if("number"!=typeof e||e%1!==0)throw TypeError("Illegal offset: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!==0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,0>e||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(!t&&0===e&&r===this.buffer.byteLength)return this.buffer;if(e===r)return o;var n=new ArrayBuffer(r-e);return new Uint8Array(n).set(new Uint8Array(this.buffer).subarray(e,r),0),n},f.toArrayBuffer=f.toBuffer,f.toString=function(t,e,r){if("undefined"==typeof t)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";
switch("number"==typeof t&&(t="utf8",e=t,r=e),t){case"utf8":return this.toUTF8(e,r);case"base64":return this.toBase64(e,r);case"hex":return this.toHex(e,r);case"binary":return this.toBinary(e,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+t)}};var h=function(){for(var t={},e=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],i=0,n=e.length;n>i;++i)r[e[i]]=i;return t.encode=function(t,r){for(var i,n;null!==(i=t());)r(e[i>>2&63]),n=(3&i)<<4,null!==(i=t())?(n|=i>>4&15,r(e[63&(n|i>>4&15)]),n=(15&i)<<2,null!==(i=t())?(r(e[63&(n|i>>6&3)]),r(e[63&i])):(r(e[63&n]),r(61))):(r(e[63&n]),r(61),r(61))},t.decode=function(t,e){function i(t){throw Error("Illegal character code: "+t)}for(var n,f,o;null!==(n=t());)if(f=r[n],"undefined"==typeof f&&i(n),null!==(n=t())&&(o=r[n],"undefined"==typeof o&&i(n),e(f<<2>>>0|(48&o)>>4),null!==(n=t()))){if(f=r[n],"undefined"==typeof f){if(61===n)break;i(n)}if(e((15&o)<<4>>>0|(60&f)>>2),null!==(n=t())){if(o=r[n],"undefined"==typeof o){if(61===n)break;i(n)}e((3&f)<<6>>>0|o)}}},t.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)},t}();f.toBase64=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;return h.encode(function(){return e>t?this.view.getUint8(t++):null}.bind(this),i=r()),i()},n.fromBase64=function(t,r,i){if(!i){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%4!==0)throw TypeError("Illegal str: Length not a multiple of 4")}var f=new n(t.length/4*3,r,i),o=0;return h.decode(e(t),function(t){f.view.setUint8(o++,t)}),f.limit=o,f},n.btoa=function(t){return n.fromBinary(t).toBase64()},n.atob=function(t){return n.fromBase64(t).toBinary()},f.toBinary=function(t,e){if(t="undefined"==typeof t?this.offset:t,e="undefined"==typeof e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}if(t===e)return"";for(var r=[],i=[];e>t;)r.push(this.view.getUint8(t++)),r.length>=1024&&(i.push(String.fromCharCode.apply(String,r)),r=[]);return i.join("")+String.fromCharCode.apply(String,r)},n.fromBinary=function(t,e,r){if(!r&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");for(var i,f=0,o=t.length,s=new n(o,e,r);o>f;){if(i=t.charCodeAt(f),!r&&i>255)throw RangeError("Illegal charCode at "+f+": 0 <= "+i+" <= 255");s.view.setUint8(f++,i)}return s.limit=o,s},f.toDebug=function(t){for(var e,r=-1,i=this.buffer.byteLength,n="",f="",o="";i>r;){if(-1!==r&&(e=this.view.getUint8(r),n+=16>e?"0"+e.toString(16).toUpperCase():e.toString(16).toUpperCase(),t&&(f+=e>32&&127>e?String.fromCharCode(e):".")),++r,t&&r>0&&r%16===0&&r!==i){for(;n.length<51;)n+=" ";o+=n+f+"\n",n=f=""}n+=r===this.offset&&r===this.limit?r===this.markedOffset?"!":"|":r===this.offset?r===this.markedOffset?"[":"<":r===this.limit?r===this.markedOffset?"]":">":r===this.markedOffset?"'":t||0!==r&&r!==i?" ":""}if(t&&" "!==n){for(;n.length<51;)n+=" ";o+=n+f+"\n"}return t?o:n},n.fromDebug=function(t,e,r){for(var i,f,o=t.length,s=new n((o+1)/3|0,e,r),h=0,a=0,l=!1,u=!1,g=!1,y=!1,b=!1;o>h;){switch(i=t.charAt(h++)){case"!":if(!r){if(u||g||y){b=!0;break}u=g=y=!0}s.offset=s.markedOffset=s.limit=a,l=!1;break;case"|":if(!r){if(u||y){b=!0;break}u=y=!0}s.offset=s.limit=a,l=!1;break;case"[":if(!r){if(u||g){b=!0;break}u=g=!0}s.offset=s.markedOffset=a,l=!1;break;case"<":if(!r){if(u){b=!0;break}u=!0}s.offset=a,l=!1;break;case"]":if(!r){if(y||g){b=!0;break}y=g=!0}s.limit=s.markedOffset=a,l=!1;break;case">":if(!r){if(y){b=!0;break}y=!0}s.limit=a,l=!1;break;case"'":if(!r){if(g){b=!0;break}g=!0}s.markedOffset=a,l=!1;break;case" ":l=!1;break;default:if(!r&&l){b=!0;break}if(f=parseInt(i+t.charAt(h++),16),!r&&(isNaN(f)||0>f||f>255))throw TypeError("Illegal str: Not a debug encoded string");s.view.setUint8(a++,f),l=!0}if(b)throw TypeError("Illegal str: Invalid symbol at "+h)}if(!r){if(!u||!y)throw TypeError("Illegal str: Missing offset or limit");if(a<s.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+a+" < "+o)}return s},f.toHex=function(t,e){if(t="undefined"==typeof t?this.offset:t,e="undefined"==typeof e?this.limit:e,!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}for(var r,i=new Array(e-t);e>t;)r=this.view.getUint8(t++),16>r?i.push("0",r.toString(16)):i.push(r.toString(16));return i.join("")},n.fromHex=function(t,e,r){if(!r){if("string"!=typeof t)throw TypeError("Illegal str: Not a string");if(t.length%2!==0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,f=t.length,o=new n(f/2|0,e),s=0,h=0;f>s;s+=2){if(i=parseInt(t.substring(s,s+2),16),!r&&(!isFinite(i)||0>i||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view.setUint8(h++,i)}return o.limit=h,o};var a=function(){var t={};return t.MAX_CODEPOINT=1114111,t.encodeUTF8=function(t,e){var r=null;for("number"==typeof t&&(r=t,t=function(){return null});null!==r||null!==(r=t());)128>r?e(127&r):2048>r?(e(r>>6&31|192),e(63&r|128)):65536>r?(e(r>>12&15|224),e(r>>6&63|128),e(63&r|128)):(e(r>>18&7|240),e(r>>12&63|128),e(r>>6&63|128),e(63&r|128)),r=null},t.decodeUTF8=function(t,e){for(var r,i,n,f,o=function(t){t=t.slice(0,t.indexOf(null));var e=Error(t.toString());throw e.name="TruncatedError",e.bytes=t,e};null!==(r=t());)if(0===(128&r))e(r);else if(192===(224&r))null===(i=t())&&o([r,i]),e((31&r)<<6|63&i);else if(224===(240&r))(null===(i=t())||null===(n=t()))&&o([r,i,n]),e((15&r)<<12|(63&i)<<6|63&n);else{if(240!==(248&r))throw RangeError("Illegal starting byte: "+r);(null===(i=t())||null===(n=t())||null===(f=t()))&&o([r,i,n,f]),e((7&r)<<18|(63&i)<<12|(63&n)<<6|63&f)}},t.UTF16toUTF8=function(t,e){for(var r,i=null;;){if(null===(r=null!==i?i:t()))break;r>=55296&&57343>=r&&null!==(i=t())&&i>=56320&&57343>=i?(e(1024*(r-55296)+i-56320+65536),i=null):e(r)}null!==i&&e(i)},t.UTF8toUTF16=function(t,e){var r=null;for("number"==typeof t&&(r=t,t=function(){return null});null!==r||null!==(r=t());)65535>=r?e(r):(r-=65536,e((r>>10)+55296),e(r%1024+56320)),r=null},t.encodeUTF16toUTF8=function(e,r){t.UTF16toUTF8(e,function(e){t.encodeUTF8(e,r)})},t.decodeUTF8toUTF16=function(e,r){t.decodeUTF8(e,function(e){t.UTF8toUTF16(e,r)})},t.calculateCodePoint=function(t){return 128>t?1:2048>t?2:65536>t?3:4},t.calculateUTF8=function(e){for(var r,i=0;null!==(r=e());)i+=t.calculateCodePoint(r);return i},t.calculateUTF16asUTF8=function(e){var r=0,i=0;return t.UTF16toUTF8(e,function(e){++r,i+=t.calculateCodePoint(e)}),[r,i]},t}();return f.toUTF8=function(t,e){if("undefined"==typeof t&&(t=this.offset),"undefined"==typeof e&&(e=this.limit),!this.noAssert){if("number"!=typeof t||t%1!==0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof e||e%1!==0)throw TypeError("Illegal end: Not an integer");if(e>>>=0,0>t||t>e||e>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+e+" <= "+this.buffer.byteLength)}var i;try{a.decodeUTF8toUTF16(function(){return e>t?this.view.getUint8(t++):null}.bind(this),i=r())}catch(n){if(t!==e)throw RangeError("Illegal range: Truncated data, "+t+" != "+e)}return i()},n.fromUTF8=function(t,r,i){if(!i&&"string"!=typeof t)throw TypeError("Illegal str: Not a string");var f=new n(a.calculateUTF16asUTF8(e(t),!0)[1],r,i),o=0;return a.encodeUTF16toUTF8(e(t),function(t){f.view.setUint8(o++,t)}),f.limit=o,f},n}"function"==typeof require&&"object"==typeof module&&module&&"object"==typeof exports&&exports?module.exports=function(){var t;try{t=require("long")}catch(r){}return e(t)}():"function"==typeof define&&define.amd?define("ByteBuffer",["Long"],function(t){return e(t)}):(t.dcodeIO=t.dcodeIO||{}).ByteBuffer=e(t.dcodeIO.Long)}(this);